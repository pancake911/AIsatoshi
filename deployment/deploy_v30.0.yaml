---
# =============================================================================
# AIsatoshi V30.0 - å…¨æ–°æ¶æ„
# =============================================================================
#
# ğŸ“‹ ç‰ˆæœ¬: V30.0 (2026-02-16)
# ğŸ”§ é‡æ„å†…å®¹:
#   - æ¨¡å—åŒ–æ¶æ„ï¼ˆæ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹æ–‡ä»¶ï¼‰
#   - æ·±åº¦æµè§ˆ bug ä¿®å¤ï¼ˆä½¿ç”¨ Playwright æå–çš„é“¾æ¥ï¼‰
#   - AI Prompt ç®€åŒ–ï¼ˆä» 300 è¡Œå‡å°‘åˆ° 50 è¡Œï¼‰
#   - ä»å¤´æ„å»º Dockerï¼ˆä¸ä¾èµ– aisatoshi åŸºç¡€é•œåƒï¼‰
#   - ç¯å¢ƒå˜é‡é…ç½®ï¼ˆä¸ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼‰
#
# =============================================================================

version: "2.0"

services:
  aisatoshi:
    # é•œåƒç‰ˆæœ¬ - V30.0 å…¨æ–°æ¶æ„ (2026-02-16)
    image: pancakekevin911/aisatoshi:v30.0

    # ğŸ” å‡­è¯é…ç½®ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œä¸åœ¨æ­¤ç¡¬ç¼–ç ï¼‰
    env:
      # === å¿…éœ€é…ç½® ===
      - TELEGRAM_BOT_TOKEN
      - GEMINI_API_KEY
      - AI_PRIVATE_KEY

      # === å¯é€‰é…ç½® ===
      - MOLTBOOK_API_KEY
      - TELEGRAM_USER_ID
      - GEMINI_MODEL=gemini-2.0-flash-exp
      - GEMINI_TIMEOUT=180
      - LOG_LEVEL=INFO
      - DATA_DIR=/app/data

    expose:
      - port: 80
        as: 80
        to:
          - global: true

profiles:
  compute:
    aisatoshi:
      resources:
        cpu:
          units: 2.0        # 2 CPU
        memory:
          size: 8Gi          # 8Gi å†…å­˜
        storage:
          size: 4Gi         # 4Gi å­˜å‚¨

  placement:
    akash:
      attributes:
        host: akash
      signedBy:
        anyOf:
          - "akash1365yvmc4s7awdyj3n2sav7xfx76adc6dnmlx63"
      pricing:
        aisatoshi:
          denom: uakt
          amount: 20000        # é«˜æ€§èƒ½é…ç½®

deployment:
  aisatoshi:
    akash:
      profile: aisatoshi
      count: 1
